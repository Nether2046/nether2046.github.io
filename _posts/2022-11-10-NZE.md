---
title: NZEマップ制作マニュアル
author: Nether2046
date: 2022-11-06
category: NZE
layout: post
---

# マップの設計について
本資料は，Nether Zombie Escape(以下，NZEと表記します)で使用するステージマップの設計方法についてのガイドラインです。<br>
各項にはそれぞれの機構が満たすべき条件が示されています。本ガイドラインに準拠したマップであれば，審査をスムーズに通過することができます。
<br><br><br><br>

## システムについて
NZEではマップとステージコントローラーが連動することでゲームが進行します。<br><br>  
<img src=https://user-images.githubusercontent.com/63540772/156907719-001fcab3-3b9f-4740-a6cb-4873c4e5d9f0.png width=40%><br><br>  
NZEでは，マップ毎に独特の処理を実装するため，ゲーム進行を担う「コア」の他に，ステージ毎に「ステージコントローラー（以下，SCと表記します）」を用意しています。SCには，ステージ特有のメッセージ，ゲート解放処理，テレポートまでの時間等を設定しますが，こちらはマップ制作者の要望に応じて開発チーム側でステージに合ったSCを設計しますので，マップ制作者がコントローラーを直接設計することはありません。<br>
また，マップ制作者にはゲート解放時間やメッセージ，その他効果付与などのギミックのタイミングや詳細について，マップ提出時に提出フォームに記入していただきますので，マップ設計時からゲーム中の動作について構想を練っていただく必要があります。

マップの制御で利用可能な<a href=https://github.com/Nether2046/NetherZombieEscape/blob/main/docs/tutorial/api.md>API一覧</a>

<br><br><br><br>


## マップ設計における注意事項
(1) ゲームが開始されると，ゾンビの抽選処理終了後より15分のカウントダウンが開始されます。ゲームは，このカウントが0:00になった時点で引き分けとして強制的に処理されますから，ゾンビの抽選時間を除いて<b>15分以内に決着がつくマップであることが要求されます。</b><br><br>
(2) マップの設計によって特定のチームが有利にならないように配慮する必要があります。例えば，ゲートの解放までの時間が長すぎたり，ゲートの数が多すぎるとゾンビが有利になってしまいます。<br><br>
(3) システムがゴール地点と認識するため，<b>ゴール地点以外のマップ上の床に石炭ブロックを使用しない</b>で下さい。<br>
(4) 多くのプレイヤー（最大50人）が同時にマップを使用するので，<b>通路やゲートはそのことを想定し，なるべく幅を広く設定</b>して下さい。
<br><br><br><br>

  
## STEP1　スタート地点
ゲーム開始時にプレイヤーが集められる地点です。最初に全プレイヤーがスタート地点からスタートし，ソンビ抽選後にゾンビが再びスタート地点へ戻される仕様になっています。ただし，マップ制作上級者向けのオプションとして，スタート地点およびゾンビ抽選後の地点は別の地点を設定することも可能です。（※後述）<br><br>

<b>【設計時の注意点】</b><br>
✅スタート地点の床は６×６ブロック以上必要です。ただし，正方形である必要はありません。<br>
✅スタート地点内に```[!pos1]```と記入した白樺の看板を設置してください。<br>

<br>
※スタート地点に立てた看板がスポーン地点として設定され，運用時に撤去されます。
<br><br><br>

ゾンビ用と人間用のスタート地点を分ける場合，人間用スタート地点に設置した看板には1行目に```[!pos1:hum]```，ゾンビ用スタート地点に設置した看板には```[!pos2:zom]```と記入してください。
     

<br><br><br><br>
## STEP2　ゲート
人間チームを足止めするための機構です。人間チームのプレイヤーがボタンを押すと，「〜〜秒後にゲートが解放します」的なメッセージが全プレイヤーに流れ，ゲートが解放するまでの時間，人間チームは防衛することになります。<br><br>

<b>【設計時の注意点】</b><br>
✅ゲートの開閉はコマンドブロックを使用して実装してください。<br>
✅1つのゲートの開閉操作につき解放用と閉鎖用の２つのコマンドブロックを用意し，マップ外に設置してください。<br>
✅2つのコマンドブロックは３ブロックほど離して設置します。コマンドブロックの起動操作はシステムに組み込まれたステージコントローラーが特定の時間にレッドストーンブロックを設置することで行いますので，各コマンドブロックに隣接する座標を記録しておいてください。<br>
✅コマンドブロックにはFillコマンド等のゲート開閉操作を設定します<br>
✅開閉用コマンドブロックは回路に繋ぐ必要ありません。<br>
✅ゲートの開閉操作を開始するためのボタンを設置してください。<br><br><br><br>

ゲート開放時のコマンド実装例：
```
/fill 1 1 1 5 5 5 air
```
<br><br>
ゲート解放時に破壊エフェクトがつくコマンド実装例：
```
/fill 1 1 1 5 5 5 air destroy
```

<br><br><a href=https://nze.nether-server.net/tools/gate>こちらのツールを使用</a>することで，比較的簡単にゲート開閉操作のコマンドを生成することができます。

<br><br><br><br>

## STEP3　ギミック
必要に応じて，アスレチック等のギミックを取り入れることでマップに個性を出しましょう。<br><br>

<b>【設計時の注意点】</b><br>
✅ゲーム時間をオーバーしない限り，設置するゲートの数に制限はありません。<br>
✅ゲームバランスを重視して下さい。<br>

<br><br><br><br>

## STEP4　テレポート地点（上級者向け）
もし，ゲーム中にギミックとして強制テレポートを使用する場合は，以下の文章を参照してください。<br><br>

<b>【設計時の注意点】</b><br>
✅テレポート地点などを設定する場合は，テレポートする時間や処理をステージコントローラーに組み込む必要がありますので，マップ提出時により多くの情報を提出する必要があります。<br><br>

テレポート地点を実装する場合は，当該箇所に白樺の看板を設置し，1行目に```[!pos【番号】]```と記入してください。【番号】は適宜数字に置き換えてください。例えば，スタート地点で2つ地点を使用した場合は```[!pos3]```から使用します。地点は合計で10個まで指定することが可能で，```[!pos10]```まで使用できますが，```[!pos4]```の次に```[!pos7]```を使用するなど，番号を飛ばして使用することはできません。


<br><br><br><br>
## STEP5　ゴール地点
人間チームが最終的にたどり着く地点であり，マップの終点です。<br><br>
<img width=70% src=https://user-images.githubusercontent.com/63540772/151965230-39264f38-0ad0-4dba-b851-e02a33fb7b30.png>
<br><br>


<b>【設計時の注意点】</b><br>
✅ゴール地点の床は8×8ブロック以上。ただし正方形である必要はありません。広めに設計すると良いでしょう。<br>
✅ゴール地点の床は石炭ブロック，その周囲をスポンジで囲ってください。<br>


<br><br><br><br>

## STEP6　マップの評価
マップが完成したら，関係者間でベータテストを行い，マップの安定性やゲームバランスを評価します。<br>
ベータテストの結果，問題がなければ正式にリリースが行われます。<br><br>
なお，マップのリリース後に修正を行うことも可能ですが，修正を行った場合は再度ベータテストにて評価を行い，審査を通過する必要があります。


<br><br><hr><br><br>

## サポート
マップ制作に関して，サポートチームによる専門的なサポートが必要な場合は，Discordサーバーをご利用ください。





追記情報
-------------
なし

