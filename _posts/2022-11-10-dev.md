---
title: 開発者向け
author: Nether2046
date: 2022-11-08
category: NZE
layout: post
permalink: /nze/dev
---

本資料は、Nether Zombie Escapeで使用するステージマップの設計方法についてのガイドラインです。<br>
各項にはそれぞれの機構が満たすべき条件が示されています。
<br><br><br><br>


## マップ設計における注意事項
(1) ゲームが開始されると、ゾンビの抽選処理終了後より15分のカウントダウンが開始されます。<br><br>
(2) マップの設計によって特定のチームが有利にならないように配慮する必要があります。<br><br>
<br><br><br><br>

  
## 1.　スタート地点を作る
ゲーム開始時にプレイヤーが集められる地点です。最初に全プレイヤーがスタート地点からスタートし、ソンビ抽選後にゾンビが再び戻される地点でもあります。マップ制作上級者向けのオプションとして，スタート地点およびゾンビ抽選後のテレポート地点は別のポイントを設定することも可能です。<br><br>

<b>【設計時の注意点】</b><br>
✅スタート地点の床は６×６ブロック以上必要です。ただし，正方形である必要はありません。<br>



<br><br><br><br>
## 2.　ゲートを作る
人間チームを足止めするための機構です。人間チームのプレイヤーがボタンを押すと、「〜〜秒後にゲートが解放します」などの全体メッセージが配信され、ゲート解放イベントが起動します。ゲートが解放するまでの間、人間チームは防衛することになります。<br><br>

<b>【設計時の注意点】</b><br>
✅1つのゲートの開閉操作につき解放用と閉鎖用の２つのコマンドブロックを用意し、マップ外に設置してください。<br>
✅2つのコマンドブロックは３ブロックほど離して設置します。コマンドブロックの起動操作はシステムに組み込まれたステージコントローラーが特定の時間にレッドストーンブロックを設置することで行いますので，各コマンドブロックに隣接する座標を記録しておいてください。<br>
✅コマンドブロックにはFillコマンド等のゲート開閉操作を設定します<br>
<br><br><br><br>

ゲート開放時のコマンド実装例：
```
/fill 1 1 1 5 5 5 air
```
<br><br>
ゲート解放時に破壊エフェクトがつくコマンド実装例：
```
/fill 1 1 1 5 5 5 air destroy
```

<br><br>
[こちらのツール](https://nze.nether-server.net/tools/gate)を使用することで、ゲート開閉操作のコマンドを簡単に生成することができます。

<br><br><br><br>


## 3.　セーフエリアを作る
人間チームが最終的にたどり着く地点です。<br><br>


<b>【設計時の注意点】</b><br>
✅ゴール地点の床は8×8ブロック以上。ただし正方形である必要はありません。<br>

<br><br><br><br>

## 4.　設定ファイルの作成
ステージの詳細情報や特殊ギミックの実装について記すファイルを作成します。<br>
ファイル名は```map-config.yml```として作成して下さい。  
テキストエディタ等でファイルを開いた後に以下のコードをコピーし、以下のコードの#より先の部分を各マップ用に書き換えて下さい。


```yml
Map Name = #　マップ名
Map Author = #　制作者名

Map Type = # マップのタイプを設定 (デフォルトは1、耐久戦なら2)

Spawn = #　スタート地点の座標　(0, 0, 0)
Safe Area = # セーフエリアの範囲 (0, 0, 0) -　(10, 10, 10)
Zombie Spawn = # ゾンビ陣営のスタート地点を分離させる場合のみ座標を設定。未設定の場合はSpawnに転送される

Zombie Time = # スタート後、ゾンビ抽選までの時間を秒数で指定
Escape Time = # 脱出までの時間を秒数で指定
Game Time = # マップのタイプに2を選択した場合のみ、耐久時間を秒数　0〜900で指定
```

## 5.　ルート資料の作成
ステージの順路や各ゲートでの耐久時間について記すファイルを作成します。<br>
ファイル名は```route.txt```として作成して下さい。  
設定ファイルとは異なり、決まった書式はありませんので、以下に挙げる例を参考に作成して下さい。<br>
マップ特有に実装したいシステムがある場合は、備考欄に実装箇所や詳細情報を記して下さい。<br>


```txt
道なりに進む
第一耐久 50秒

分かれ道
第二耐久 30秒

エレベーターに乗って下の階へ
道なりに進む
第三耐久 30秒

ゴール

---
(備考) エレベーターの起動までに30秒。最初にボタンが押されてから20秒後にドアを閉める。


```

<br><br><br><br>


